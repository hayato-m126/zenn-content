---
title: "Ubuntuでchrome-remote-desktopを設定するときハマったこと"
emoji: "😎"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["CRD", "Ubuntu"]
published: true
---

## 概要

Ubuntuにchrome-remote-desktopを設定しようとしてハマったことのまとめ。

2024/06 時点での情報であり、OSやchrome-remote-desktopのアップデートで変わる可能性があります。

## 想定環境

- Ubuntu 22.04

## インストール方法

```shell
cd /tmp
wget https://dl.google.com/linux/direct/chrome-remote-desktop_current_amd64.deb
sudo apt install /tmp/chrome-remote-desktop_current_amd64.deb
```

## リモートアクセス設定

<https://remotedesktop.google.com/access/>にアクセスして設定する。

### 注意

Windows PCの場合は、画像のようにリモートアクセスのタブにオンにするボタンが表示されますが、Ubuntuだとボタンが出ません。

![button](/images/CRD/button.png)

リモートアクセスのタブに表示されるメッセージを見ると、別のPCからアクセスする必要があるというようなことが書いてあります。

![headless](/images/CRD/headless.png)

なので、sshサーバーを立ててリモート経由じゃないと設定できないのか？と思うのですが、実はそんなことはなく、ssh経由でセットアップのタブをクリックしてボタンをポチポチ押して進めていった先に表示されるコマンドをターミナルで叩くことで設定できます。

![ssh](/images/CRD/ssh.png)

過去にはLinux版でもボタンが出てきて設定できたし、Windows版と同じだと思い込んでいるとハマってしまうので注意が必要です。

（私はservice status みたり restartしたり、chrome-remote-desktopのソフトのバージョンを変えたり、全然検討違いな試行錯誤を繰り返して時間を溶かしてしまいました。）

## Ubuntu 24.04での注意点

2024.6月現在24.04でchrome-remote-desktopを設定すると、リモートではログインできるが、ディスプレイつけてローカルでログインしようとするとできない。

session already running　と出る。

<https://askubuntu.com/questions/1516121/cant-login-session-already-running>
